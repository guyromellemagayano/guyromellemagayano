/* =============================================================================
   CANVAS COMPONENT STYLES
   ============================================================================= */

/* Canvas wrapper for additional elements */
.canvas-wrapper {
  position: relative;
  display: inline-block;
}

/* Base Canvas Styles */
.canvas {
  display: block;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  background-color: #ffffff;
  transition: all 0.2s ease-in-out;
  touch-action: manipulation; /* Optimize for touch interactions */
  user-select: none; /* Prevent text selection during drawing */
}

/* Canvas Variants */
.canvas--default {
  max-width: 100%;
  height: auto;
}

.canvas--responsive {
  width: 100%;
  height: auto;
  max-width: 100%;
}

.canvas--fullscreen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 1000;
  border: none;
  border-radius: 0;
}

.canvas--thumbnail {
  width: 150px;
  height: 100px;
  border-radius: 8px;
  border: 2px solid #e2e8f0;
}

/* Canvas States */
.canvas--active {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  cursor: crosshair;
}

.canvas--disabled {
  opacity: 0.6;
  cursor: not-allowed;
  background-color: #f8fafc;
  border-color: #cbd5e1;
}

.canvas--loading {
  opacity: 0.8;
  cursor: wait;
}

.canvas--drawing {
  cursor: crosshair;
  border-color: #10b981;
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
}

.canvas--debug {
  border: 2px dashed #8b5cf6;
  background-color: rgba(139, 92, 246, 0.05);
}

.canvas--initializing {
  background-color: #f1f5f9;
  border-color: #94a3b8;
}

.canvas--error {
  border-color: #ef4444;
  background-color: rgba(239, 68, 68, 0.05);
}

/* Loading States */
.canvas__loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  background-color: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  min-height: 150px;
}

.canvas__loading-spinner {
  margin-bottom: 1rem;
}

.canvas__loading-icon {
  color: #3b82f6;
  animation: canvas-spin 1s linear infinite;
}

.canvas__loading-track {
  opacity: 0.25;
}

.canvas__loading-indicator {
  opacity: 0.75;
  stroke-dasharray: 31.416;
  stroke-dashoffset: 31.416;
  animation: canvas-loading-dash 1.5s ease-in-out infinite;
}

.canvas__loading-text {
  color: #64748b;
  font-size: 0.875rem;
  font-weight: 500;
}

/* Error States */
.canvas__error {
  display: flex;
  align-items: center;
  padding: 1rem;
  background-color: rgba(239, 68, 68, 0.05);
  border: 1px solid #ef4444;
  border-radius: 4px;
  color: #dc2626;
}

.canvas__error-icon {
  font-size: 1.5rem;
  margin-right: 0.75rem;
  flex-shrink: 0;
}

.canvas__error-content {
  flex: 1;
}

.canvas__error-title {
  font-weight: 600;
  margin: 0 0 0.25rem 0;
  font-size: 0.875rem;
}

.canvas__error-message {
  margin: 0;
  font-size: 0.75rem;
  color: #991b1b;
  line-height: 1.4;
}

/* Debug Overlay */
.canvas__debug-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(139, 92, 246, 0.9);
  color: white;
  padding: 0.5rem;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.75rem;
  z-index: 10;
  border-radius: 4px 4px 0 0;
  backdrop-filter: blur(4px);
}

.canvas__debug-info {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.canvas__debug-section {
  white-space: nowrap;
}

.canvas__debug-section strong {
  margin-right: 0.25rem;
}

/* Description */
.canvas__description {
  margin-top: 0.5rem;
  padding: 0.75rem;
  background-color: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  font-size: 0.875rem;
  color: #475569;
  line-height: 1.5;
}

/* Accessibility and Focus Styles */
.canvas:focus-visible {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.canvas[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Animations */
@keyframes canvas-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes canvas-loading-dash {
  0% {
    stroke-dasharray: 1, 31.416;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 15.708, 31.416;
    stroke-dashoffset: -7.854;
  }
  100% {
    stroke-dasharray: 15.708, 31.416;
    stroke-dashoffset: -31.416;
  }
}

/* High DPI Support */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .canvas {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Dark Mode Support */
@media (prefers-color-scheme: dark) {
  .canvas {
    background-color: #1e293b;
    border-color: #334155;
    color: #f1f5f9;
  }

  .canvas--active {
    border-color: #60a5fa;
    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
  }

  .canvas--disabled {
    background-color: #0f172a;
    border-color: #475569;
  }

  .canvas--drawing {
    border-color: #34d399;
    box-shadow: 0 0 0 2px rgba(52, 211, 153, 0.3);
  }

  .canvas--debug {
    border-color: #a78bfa;
    background-color: rgba(167, 139, 250, 0.1);
  }

  .canvas--error {
    border-color: #f87171;
    background-color: rgba(248, 113, 113, 0.1);
  }

  .canvas__loading {
    background-color: #1e293b;
    border-color: #334155;
  }

  .canvas__loading-text {
    color: #94a3b8;
  }

  .canvas__error {
    background-color: rgba(248, 113, 113, 0.1);
    border-color: #f87171;
    color: #fca5a5;
  }

  .canvas__error-message {
    color: #f87171;
  }

  .canvas__description {
    background-color: #1e293b;
    border-color: #334155;
    color: #cbd5e1;
  }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
  .canvas {
    border: 2px solid;
    border-color: CanvasText;
    background-color: Canvas;
  }

  .canvas--active {
    border-color: Highlight;
    outline: 2px solid Highlight;
    outline-offset: 2px;
  }

  .canvas--disabled {
    opacity: 0.5;
    border-color: GrayText;
  }

  .canvas__debug-overlay {
    background: Highlight;
    color: HighlightText;
  }

  .canvas__error {
    border-color: Canvas;
    background-color: Canvas;
    color: CanvasText;
  }
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .canvas {
    transition: none;
  }

  .canvas__loading-icon {
    animation: none;
  }

  .canvas__loading-indicator {
    animation: none;
    stroke-dasharray: none;
    stroke-dashoffset: 0;
  }
}

/* Touch Device Optimizations */
@media (hover: none) and (pointer: coarse) {
  .canvas {
    touch-action: none; /* Prevent scrolling on touch devices when drawing */
  }

  .canvas--active {
    /* Larger touch target */
    min-width: 44px;
    min-height: 44px;
  }
}

/* Print Styles */
@media print {
  .canvas {
    break-inside: avoid;
    border: 1px solid #000;
    background: #fff;
  }

  .canvas__debug-overlay,
  .canvas__loading,
  .canvas__error {
    display: none;
  }

  .canvas__description {
    background: none;
    border: none;
    margin-top: 0.25rem;
    font-size: 0.75rem;
  }
}

/* Container Queries for Responsive Behavior */
@container (max-width: 300px) {
  .canvas--responsive {
    border-radius: 2px;
  }

  .canvas__debug-overlay {
    font-size: 0.625rem;
    padding: 0.25rem;
  }

  .canvas__debug-info {
    flex-direction: column;
    gap: 0.25rem;
  }
}

/* Performance Optimizations */
.canvas {
  /* Enable hardware acceleration */
  transform: translateZ(0);
  will-change: transform;
}

.canvas--drawing {
  /* Optimize for drawing performance */
  will-change: contents;
}

/* Accessibility Improvements */
.canvas[role="img"] {
  /* Screen reader optimization for canvas as image */
}

.canvas[role="application"] {
  /* Screen reader optimization for interactive canvas */
}

/* Custom Properties for Theming */
.canvas {
  --canvas-border-color: #e2e8f0;
  --canvas-background-color: #ffffff;
  --canvas-active-color: #3b82f6;
  --canvas-disabled-opacity: 0.6;
  --canvas-border-radius: 4px;
  --canvas-focus-color: #3b82f6;
  --canvas-error-color: #ef4444;
  --canvas-success-color: #10b981;
  --canvas-debug-color: #8b5cf6;

  border-color: var(--canvas-border-color);
  background-color: var(--canvas-background-color);
  border-radius: var(--canvas-border-radius);
}

.canvas--active {
  border-color: var(--canvas-active-color);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--canvas-active-color) 10%, transparent);
}

.canvas--disabled {
  opacity: var(--canvas-disabled-opacity);
}

.canvas:focus-visible {
  outline-color: var(--canvas-focus-color);
}

.canvas--error {
  border-color: var(--canvas-error-color);
  background-color: color-mix(in srgb, var(--canvas-error-color) 5%, transparent);
}

.canvas--drawing {
  border-color: var(--canvas-success-color);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--canvas-success-color) 20%, transparent);
}

.canvas--debug {
  border-color: var(--canvas-debug-color);
  background-color: color-mix(in srgb, var(--canvas-debug-color) 5%, transparent);
} 